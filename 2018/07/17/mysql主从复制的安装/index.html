<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1.MySQL的Lunix版的安装1.前往mysql官网下载地址下载rpm安装包，上传MySQL-client-5.5.52-1.el6.x86_64.rpm，MySQL-server-5.5.52-1.el6.x86_64.rpmRPM包到opt目录下2.检查当前系统是否安装过mysql12[root@mysql-master opt]# rpm -qa|grep -i mysql //查询命令">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/2018/07/17/mysql主从复制的安装/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="1.MySQL的Lunix版的安装1.前往mysql官网下载地址下载rpm安装包，上传MySQL-client-5.5.52-1.el6.x86_64.rpm，MySQL-server-5.5.52-1.el6.x86_64.rpmRPM包到opt目录下2.检查当前系统是否安装过mysql12[root@mysql-master opt]# rpm -qa|grep -i mysql //查询命令">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-07-17T02:46:00.495Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
<meta name="twitter:description" content="1.MySQL的Lunix版的安装1.前往mysql官网下载地址下载rpm安装包，上传MySQL-client-5.5.52-1.el6.x86_64.rpm，MySQL-server-5.5.52-1.el6.x86_64.rpmRPM包到opt目录下2.检查当前系统是否安装过mysql12[root@mysql-master opt]# rpm -qa|grep -i mysql //查询命令">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-mysql主从复制的安装" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/17/mysql主从复制的安装/" class="article-date">
  <time datetime="2018-07-17T02:46:51.507Z" itemprop="datePublished">2018-07-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-MySQL的Lunix版的安装"><a href="#1-MySQL的Lunix版的安装" class="headerlink" title="1.MySQL的Lunix版的安装"></a>1.MySQL的Lunix版的安装</h3><h5 id="1-前往mysql官网下载地址下载rpm安装包，上传MySQL-client-5-5-52-1-el6-x86-64-rpm，MySQL-server-5-5-52-1-el6-x86-64-rpmRPM包到opt目录下"><a href="#1-前往mysql官网下载地址下载rpm安装包，上传MySQL-client-5-5-52-1-el6-x86-64-rpm，MySQL-server-5-5-52-1-el6-x86-64-rpmRPM包到opt目录下" class="headerlink" title="1.前往mysql官网下载地址下载rpm安装包，上传MySQL-client-5.5.52-1.el6.x86_64.rpm，MySQL-server-5.5.52-1.el6.x86_64.rpmRPM包到opt目录下"></a>1.前往<a href="https://dev.mysql.com/downloads/mysql/" title="mysql官网下载地址" target="_blank" rel="noopener">mysql官网下载地址</a>下载rpm安装包，上传MySQL-client-5.5.52-1.el6.x86_64.rpm，MySQL-server-5.5.52-1.el6.x86_64.rpmRPM包到opt目录下</h5><h5 id="2-检查当前系统是否安装过mysql"><a href="#2-检查当前系统是否安装过mysql" class="headerlink" title="2.检查当前系统是否安装过mysql"></a>2.检查当前系统是否安装过mysql</h5><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@mysql-master <span class="keyword">opt</span>]# rpm -<span class="keyword">qa</span>|<span class="keyword">grep</span> -i mysql //查询命令</span><br><span class="line">[root@mysql-master <span class="keyword">opt</span>]# rpm -<span class="keyword">e</span> RPM软件包名（查询出来的名字）//卸载命令</span><br></pre></td></tr></table></figure>
<h5 id="3-安装RPM包"><a href="#3-安装RPM包" class="headerlink" title="3.安装RPM包"></a>3.安装RPM包</h5><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@mysql-master ~]# <span class="keyword">cd</span> /<span class="keyword">opt</span></span><br><span class="line">[root@mysql-master <span class="keyword">opt</span>]# rpm -ivh MySQL-server-<span class="number">5.5</span>.<span class="number">52</span>-<span class="number">1</span>.el6.x86_64.rpm --force --nodeps</span><br><span class="line">[root@mysql-master <span class="keyword">opt</span>]# rpm -ivh MySQL-client-<span class="number">5.5</span>.<span class="number">52</span>-<span class="number">1</span>.el6.x86_64.rpm</span><br></pre></td></tr></table></figure>
<h5 id="4-查看是否安装成功"><a href="#4-查看是否安装成功" class="headerlink" title="4.查看是否安装成功"></a>4.查看是否安装成功</h5><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@mysql-master <span class="keyword">opt</span>]# mysqladmin --<span class="keyword">version</span></span><br><span class="line">mysqladmin  Ver <span class="number">8.42</span> Distrib <span class="number">5.5</span>.<span class="number">52</span>, <span class="keyword">for</span> Linux <span class="keyword">on</span> x86_6</span><br><span class="line"></span><br><span class="line">[root@mysql-master <span class="keyword">opt</span>]# <span class="keyword">cat</span> /etc/passwd|<span class="keyword">grep</span> mysql</span><br><span class="line">mysq<span class="variable">l:x</span>:<span class="number">496</span>:<span class="number">493</span>:MySQL server:/var/lib/mysq<span class="variable">l:</span>/bin/bash</span><br><span class="line"></span><br><span class="line">[root@mysql-master <span class="keyword">opt</span>]# <span class="keyword">cat</span> /etc/group|<span class="keyword">grep</span> mysql</span><br><span class="line">mysq<span class="variable">l:x</span>:<span class="number">493</span>:</span><br></pre></td></tr></table></figure>
<h5 id="5-mysql服务的启动和停止"><a href="#5-mysql服务的启动和停止" class="headerlink" title="5.mysql服务的启动和停止"></a>5.mysql服务的启动和停止</h5><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@mysql-master <span class="keyword">opt</span>]# service mysql start</span><br><span class="line">Starting MySQL...                                          [确定]</span><br><span class="line">[root@mysql-master <span class="keyword">opt</span>]# <span class="keyword">ps</span> -ef|<span class="keyword">grep</span> mysql</span><br><span class="line">[root@mysql-master <span class="keyword">opt</span>]# netstat -anp|<span class="keyword">grep</span> <span class="number">3306</span></span><br><span class="line">[root@mysql-master <span class="keyword">opt</span>]# service mysql <span class="keyword">stop</span></span><br></pre></td></tr></table></figure>
<h5 id="6-连接mysql并修改密码"><a href="#6-连接mysql并修改密码" class="headerlink" title="6.连接mysql并修改密码"></a>6.连接mysql并修改密码</h5><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@mysql-master <span class="keyword">opt</span>]# mysqladmin -<span class="keyword">u</span> root password</span><br><span class="line">New password: </span><br><span class="line">Confirm <span class="keyword">new</span> password:</span><br><span class="line">[root@mysql-master <span class="keyword">opt</span>]# mysql -<span class="keyword">u</span> root -<span class="keyword">p</span></span><br><span class="line">Enter password: </span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id <span class="keyword">is</span> <span class="number">2</span></span><br><span class="line">Server <span class="keyword">version</span>: <span class="number">5.5</span>.<span class="number">52</span> MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (<span class="keyword">c</span>) <span class="number">2000</span>, <span class="number">2016</span>, Oracle <span class="built_in">and</span>/<span class="built_in">or</span> its affiliates. All rights reserved.</span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database          |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| test              |</span><br><span class="line">+--------------------+</span><br><span class="line"><span class="number">4</span> rows in <span class="keyword">set</span> (<span class="number">0.09</span> sec)</span><br></pre></td></tr></table></figure>
<h5 id="7-开机自启动mysql服务"><a href="#7-开机自启动mysql服务" class="headerlink" title="7.开机自启动mysql服务"></a>7.开机自启动mysql服务</h5><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@mysql-master <span class="keyword">opt</span>]# chkconfig mysql <span class="keyword">on</span></span><br><span class="line">[root@mysql-master <span class="keyword">opt</span>]# chkconfig|<span class="keyword">grep</span> mysql</span><br><span class="line">mysql              <span class="number">0</span>:关闭    <span class="number">1</span>:关闭    <span class="number">2</span>:启用    <span class="number">3</span>:启用    <span class="number">4</span>:启用    <span class="number">5</span>:启用    <span class="number">6</span>:关闭</span><br></pre></td></tr></table></figure>
<h5 id="8-查看软件安装位置（mysql数据库的数据库）"><a href="#8-查看软件安装位置（mysql数据库的数据库）" class="headerlink" title="8.查看软件安装位置（mysql数据库的数据库）"></a>8.查看软件安装位置（mysql数据库的数据库）</h5><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@mysql-master <span class="keyword">opt</span>]# whereis mysql  //查看应用程序或系统命令安装位置</span><br><span class="line">mysq<span class="variable">l:</span> /usr/bin/mysql /usr/lib64/mysql /usr/share/mysql /usr/share/man/man1/mysql.<span class="number">1</span>.gz</span><br><span class="line"></span><br><span class="line">[root@mysql-master <span class="keyword">opt</span>]# which mysql  //查看应用程序或系统命令的可执行文件路径</span><br><span class="line">/usr/bin/mysql</span><br></pre></td></tr></table></figure>
<h5 id="9-设置字符集"><a href="#9-设置字符集" class="headerlink" title="9.设置字符集"></a>9.设置字符集</h5><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"># 修改配置文件的位置</span><br><span class="line">[root@mysql-master <span class="keyword">opt</span>]# <span class="keyword">cp</span> /usr/share/mysql/my-huge.<span class="keyword">cnf</span> /etc/my.<span class="keyword">cnf</span></span><br><span class="line"></span><br><span class="line">#查看mysql的字符集</span><br><span class="line">[root@mysql-master <span class="keyword">opt</span>]# mysql -<span class="keyword">u</span> root -<span class="keyword">p</span> </span><br><span class="line">Enter password: </span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id <span class="keyword">is</span> <span class="number">5</span></span><br><span class="line">Server <span class="keyword">version</span>: <span class="number">5.5</span>.<span class="number">52</span>-<span class="built_in">log</span> MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (<span class="keyword">c</span>) <span class="number">2000</span>, <span class="number">2016</span>, Oracle <span class="built_in">and</span>/<span class="built_in">or</span> its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle <span class="keyword">is</span> <span class="keyword">a</span> registered trademark of Oracle Corporation <span class="built_in">and</span>/<span class="built_in">or</span> its</span><br><span class="line">affiliates. Other names may <span class="keyword">be</span> trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type <span class="string">'help;'</span> <span class="built_in">or</span> <span class="string">'\h'</span> <span class="keyword">for</span> <span class="keyword">help</span>. Type <span class="string">'\c'</span> <span class="keyword">to</span> clear the current <span class="built_in">input</span> statement.</span><br><span class="line"></span><br><span class="line">mysql&gt; show variables like '%char%';</span><br><span class="line">+--------------------------+----------------------------+</span><br><span class="line">| Variable_name            | Value                      |</span><br><span class="line">+--------------------------+----------------------------+</span><br><span class="line">| character_set_client    | utf8                      |</span><br><span class="line">| character_set_connection | utf8                      |</span><br><span class="line">| character_set_database  | latin1                    |</span><br><span class="line">| character_set_filesystem | binary                    |</span><br><span class="line">| character_set_results    | utf8                      |</span><br><span class="line">| character_set_server    | latin1                    |</span><br><span class="line">| character_set_system    | utf8                      |</span><br><span class="line">| character_sets_dir      | /usr/share/mysql/charsets/ |</span><br><span class="line">+--------------------------+----------------------------+</span><br><span class="line"><span class="number">8</span> rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#修改三个地方[增加<span class="number">21</span>行，<span class="number">29</span>-<span class="number">31</span>行，<span class="number">140</span>行的内容]</span><br><span class="line">[root@mysql-master <span class="keyword">opt</span>]# <span class="keyword">vim</span> /etc/my.<span class="keyword">cnf</span></span><br><span class="line"><span class="number">17</span> [client]</span><br><span class="line"><span class="number">18</span> #password      = your_password</span><br><span class="line"><span class="number">19</span> port            = <span class="number">3306</span></span><br><span class="line"><span class="number">20</span> socket          = /var/lib/mysql/mysql.sock</span><br><span class="line"><span class="number">21</span> default-character-<span class="keyword">set</span>=utf8</span><br><span class="line"></span><br><span class="line"><span class="number">25</span> # The MySQL server</span><br><span class="line"><span class="number">26</span> [mysqld]        </span><br><span class="line"><span class="number">27</span> port            = <span class="number">3306</span></span><br><span class="line"><span class="number">28</span> socket          = /var/lib/mysql/mysql.sock</span><br><span class="line"><span class="number">29</span> character_set_client=utf8</span><br><span class="line"><span class="number">30</span> character_set_server=utf8</span><br><span class="line"><span class="number">31</span> collation_server=utf8_general_ci</span><br><span class="line"></span><br><span class="line"><span class="number">138</span> [mysql]</span><br><span class="line"><span class="number">139</span> <span class="keyword">no</span>-auto-rehash</span><br><span class="line"><span class="number">140</span> default-character-<span class="keyword">set</span>=utf8</span><br><span class="line"></span><br><span class="line">[root@mysql-master <span class="keyword">opt</span>]# service mysql <span class="keyword">stop</span></span><br><span class="line">Shutting down MySQL...                                    [确定]</span><br><span class="line">[root@mysql-master <span class="keyword">opt</span>]# service mysql start</span><br><span class="line">Starting MySQL.. </span><br><span class="line"></span><br><span class="line">#登录mysql再次查看字符集</span><br><span class="line">mysql&gt; show variables like '%char%';</span><br><span class="line">+--------------------------+----------------------------+</span><br><span class="line">| Variable_name            | Value                      |</span><br><span class="line">+--------------------------+----------------------------+</span><br><span class="line">| character_set_client    | utf8                      |</span><br><span class="line">| character_set_connection | utf8                      |</span><br><span class="line">| character_set_database  | utf8                      |</span><br><span class="line">| character_set_filesystem | binary                    |</span><br><span class="line">| character_set_results    | utf8                      |</span><br><span class="line">| character_set_server    | utf8                      |</span><br><span class="line">| character_set_system    | utf8                      |</span><br><span class="line">| character_sets_dir      | /usr/share/mysql/charsets/ |</span><br><span class="line">+--------------------------+----------------------------+</span><br><span class="line"><span class="number">8</span> rows in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<h3 id="2-MySQL主从复制的配置"><a href="#2-MySQL主从复制的配置" class="headerlink" title="2.MySQL主从复制的配置"></a>2.MySQL主从复制的配置</h3><p>#####1.主机修改my.cnf配置文件<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">55</span> <span class="built_in">log</span>-bin=mysql-bin # 启动二进制日志</span><br><span class="line"><span class="number">56</span> <span class="built_in">log</span>-err=mysql-err # 启用错误日志</span><br><span class="line"><span class="number">60</span> server-id      = <span class="number">1</span>   # 设置主机server-id</span><br><span class="line"></span><br><span class="line"># 在主机的my.<span class="keyword">cnf</span>文件中配置需要同步的数据库</span><br><span class="line">binlog-ignore-db=information_schema  #忽略同步的数据库</span><br><span class="line">binlog-ignore-db=mysql</span><br><span class="line">binlog-ignore-db=performance_schema</span><br><span class="line">binlog-ignore-db=test</span><br><span class="line"></span><br><span class="line">binlog-<span class="keyword">do</span>-db = shop #需要同步的数据库</span><br></pre></td></tr></table></figure></p>
<p>#####2.从机修改my.cnf配置文件<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">60</span> #server-id      = <span class="number">1</span> #将此行注释掉</span><br><span class="line"><span class="number">97</span> server-id      = <span class="number">2</span> #将此行开启</span><br></pre></td></tr></table></figure></p>
<p>重启主机和从机。</p>
<p>#####3.登录mysql设置root用户使用任何IP地址都可以访问方便使用navicat连接测试<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO `root`@`%` IDENTIFIED BY '123456' WITH GRANT OPTION;</span><br></pre></td></tr></table></figure></p>
<p>#####4.在主机上创建用于同步的用户账号并查看数据目前的状态<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;CREATE USER 'slave01'@'192.168.1.116' IDENTIFIED BY '123456';#创建用户，192.168.1.116从机IP</span><br><span class="line"></span><br><span class="line">mysql&gt; GRANT REPLICATION SLAVE ON *.* TO 'slave01'@'192.168.1.116';#分配权限</span><br><span class="line"></span><br><span class="line">mysql&gt;flush privileges;  #刷新权限</span><br><span class="line"></span><br><span class="line">mysql&gt; show master status;</span><br><span class="line">+------------------+----------+--------------+--------------------------------------------------+</span><br><span class="line">| File            | Position | Binlog_Do_DB | Binlog_Ignore_DB                                |</span><br><span class="line">+------------------+----------+--------------+--------------------------------------------------+</span><br><span class="line">| mysql-bin.<span class="number">000007</span> |      <span class="number">516</span> | shop        | information_schema,mysql,performance_schema,test |</span><br><span class="line">+------------------+----------+--------------+--------------------------------------------------+</span><br><span class="line"><span class="number">1</span> row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></p>
<p>#####5.在从机上执行如下的sql语句<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CHANGE MASTER TO MASTER_HOST=<span class="string">'192.168.1.113'</span>,  </span><br><span class="line">    -&gt; MASTER_USER=<span class="string">'slave01'</span>,</span><br><span class="line">    -&gt; MASTER_PASSWORD=<span class="string">'123456'</span>,</span><br><span class="line">    -&gt; MASTER_LOG_FILE=<span class="string">'mysql-bin.000004'</span>,</span><br><span class="line">    -&gt; MASTER_LOG_POS=1642376;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.06</span> sec)</span><br></pre></td></tr></table></figure></p>
<p>#####6.在从机上执行如下的sql语句<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; start slave;</span><br><span class="line"></span><br><span class="line">mysql&gt; show slave status\G    #查看同步的状态</span><br><span class="line"></span><br><span class="line">*************************** <span class="number">1</span>. row ***************************</span><br><span class="line">              Slave_IO_State: Waiting <span class="keyword">for</span> master <span class="keyword">to</span> send event</span><br><span class="line">                  Master_Hos<span class="variable">t:</span> <span class="number">192.168</span>.<span class="number">1.113</span></span><br><span class="line">                  Master_User: slave01</span><br><span class="line">                  Master_Por<span class="variable">t:</span> <span class="number">3306</span></span><br><span class="line">                Connect_Retry: <span class="number">60</span></span><br><span class="line">              Master_Log_File: mysql-bin.<span class="number">000004</span></span><br><span class="line">          Read_Master_Log_Po<span class="variable">s:</span> <span class="number">3286131</span></span><br><span class="line">              Relay_Log_File: mysql-slave-relay-bin.<span class="number">000002</span></span><br><span class="line">                Relay_Log_Po<span class="variable">s:</span> <span class="number">253</span></span><br><span class="line">        Relay_Master_Log_File: mysql-bin.<span class="number">000004</span></span><br><span class="line">            Slave_IO_Runnin<span class="variable">g:</span> Yes</span><br><span class="line">            Slave_SQL_Runnin<span class="variable">g:</span> Yes</span><br></pre></td></tr></table></figure></p>
<p>#####7.在主机上创建数据库shop并插入数据，测试主从复制是否有效。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/17/mysql主从复制的安装/" data-id="cjjp3kgep0000zsmagxzwo5zt" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2018/07/17/使用hexo快速搭建博客/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/07/17/mysql主从复制的安装/">(no title)</a>
          </li>
        
          <li>
            <a href="/2018/07/17/使用hexo快速搭建博客/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>